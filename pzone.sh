ifconfig wlp4s0 up 10.0.0.1 netmask 255.255.255.0
sleep 2

killall dnsmasq
killall hostapd
sleep 2
/etc/init.d/dnsmasq start
sleep 5

iptables --flush
iptables --table nat --flush
iptables --delete-chain
iptables --table nat --delete-chain
iptables --table nat --append POSTROUTING --out-interface enp0s25 -j MASQUERADE
iptables --append FORWARD --in-interface wlp4s0 -j ACCEPT

sysctl -w net.ipv4.ip_forward=1

HOST_MACS=(
4E:53:50:4F:4F:40
4E:53:50:4F:4F:41
4E:53:50:4F:4F:42
4E:53:50:4F:4F:43
4E:53:50:4F:4F:44
4E:53:50:4F:4F:45
4E:53:50:4F:4F:46
4E:53:50:4F:4F:47
4E:53:50:4F:4F:48
4E:53:50:4F:4F:49
4E:53:50:4F:4F:4A
4E:53:50:4F:4F:4B
4E:53:50:4F:4F:4C
4E:53:50:4F:4F:4D
4E:53:50:4F:4F:4E
4E:53:50:4F:4F:4F
)

PERSONAL_MACS=(
34:08:04:BF:AC:8A
CC:FE:3C:92:DF:43
A6:F3:C1:0B:C6:7E
62:36:DD:7E:05:B9
60:36:DD:7E:05:B8
00:EB:2D:D8:62:AA
7C:61:93:07:6C:25
F4:6D:04:A1:6B:86
00:25:86:D1:D8:A3
00:02:72:7D:96:0C
06:1B:9E:28:FB:B2
C0:3F:0E:8F:2B:1A
00:E0:B8:AE:08:04
00:0C:F6:C4:88:00
10:68:3F:37:E0:2C
00:23:14:A7:FC:11
90:F6:52:D0:BE:A2
00:17:82:F5:88:38
00:14:A5:C6:3A:64 
CC:3A:61:08:16:DF
A4:C0:E1:69:0A:F8
90:94:E4:A9:EF:CE
00:1B:B9:8C:65:FF
84:00:D2:B2:51:F1
88:53:2E:0B:74:5E
F4:EC:38:E1:CC:97
10:BF:48:B3:C7:94
8C:A9:82:1F:2C:EE
00:1F:C6:42:41:8C
20:AA:4B:36:D3:86
90:18:7C:89:30:16
9C:2A:70:7F:FD:A4
B4:98:42:ED:FF:6B
F8:01:13:79:05:59
00:1D:7E:2A:C7:7E
00:18:E7:9C:D4:DB
00:14:78:52:F5:7E
74:F6:12:C9:28:3B
74:EA:3A:EF:90:86
00:25:F1:D9:F8:A2
C8:3A:35:93:27:02
1C:B0:94:45:8F:D4
34:08:04:BF:69:8A
98:2c:be:05:63:c9
00:22:6B:62:F0:19
00:22:6B:62:F0:1A
EC:1A:59:09:86:85
74:44:01:85:1D:FE
00:24:36:AC:D4:D1
00:18:F8:DA:62:41
00:25:D3:92:FA:6C
C4:3D:C7:A0:18:1B
E2:91:F5:FB:8E:09
44:6D:57:01:79:AA
A4:B1:E9:E9:84:BD
50:CC:F8:65:33:1F
C0:3F:0E:C4:74:78
00:22:A4:7C:1A:18
34:AF:2C:EA:DF:34
14:10:9F:E1:70:47
20:c9:d0:23:42:b5
00:22:3F:A9:0D:D6
00:1E:E5:E7:14:2D
84:C9:B2:DA:DC:1A
00:22:2D:84:22:F4
6C:71:D9:54:4E:87
E0:91:F5:6F:8B:B0
20:4E:7F:5A:09:1F
00:26:42:3c:ad:e0
90:18:7C:1E:C5:75
9C:E6:35:D9:33:CB
68:7F:74:C6:9A:21
68:7F:74:C6:9A:22
68:7F:74:C6:9A:1F
F8:1A:67:45:52:9E
20:AA:4B:33:89:81
00:26:F2:EF:31:97
64:66:B3:68:C0:49
00:24:17:ED:E7:62
88:44:F6:26:12:8C
78:59:5E:6F:E3:6A
00:26:18:51:82:7a
84:74:2a:02:52:0b
10:6F:3F:38:F0:B8
AC:81:12:56:41:2D
E0:46:9A:8B:BA:59
64:70:02:d7:c7:f3
2C:B0:5D:97:84:CB
00:22:3F:92:2D:AE
f8:1a:67:42:e8:0a
C8:D7:19:B7:CF:DB
00:23:4E:8F:C7:C0
00:16:17:3e:26:6d
00:18:E7:A7:D8:1A
1C:6F:65:A6:31:CC
00:0C:F6:C2:EA:58
00:06:4F:84:65:12
2A:BE:19:DE:DD:6F
C0:C1:C0:23:6B:7A
C8:BC:C8:E9:0A:9D
e4:48:c7:85:8d:20
00:26:BB:13:58:8B
00:17:3f:56:0c:5e
28:16:2E:DB:BB:21
FE:1A:67:65:67:72
84:C9:B2:E2:94:B5
00:14:95:b9:d2:70
98:2c:be:da:65:c8
BC:14:01:C3:53:80
0C:D5:02:13:B6:38
1C:6F:65:AA:D0:36
00:1A:2B:A5:C3:31
B4:62:93:65:CC:F2
34:08:04:E3:46:CD
00:21:85:72:86:D1
C8:D7:19:80:D7:C4
28:C6:8E:1D:7D:60
f8:d1:11:4b:1a:07
2C:B0:5D:38:EF:C4
9C:D3:6D:FF:75:51
88:32:9B:36:95:F2
B8:8D:12:60:B3:AF
00:06:25:3B:E1:FA
40:4A:03:A4:31:3B
98:F5:37:79:68:59
00:17:9A:FD:A7:E7
00:14:BF:77:E9:15
28:10:7b:3c:2f:c1
00:26:5A:2C:C2:25
00:17:3F:17:B4:0E
00:21:04:1C:08:28
60:2A:D0:88:B6:84
C0:3F:0E:1D:DB:45
9C:E6:E7:D3:78:00
38:EA:A7:DE:58:1D
CC:5D:4E:DA:9B:EA
00:1C:10:C1:F8:36
3E:6A:31:7E:75:E1
34:6B:D3:7B:52:12
6C:B7:F4:B5:78:F2
F0:7D:68:E1:2B:88
64:1C:67:5A:E3:B6
00:24:B2:96:C5:91
8C:3A:E3:6E:E1:CA
CC:C3:EA:B3:B4:55
64:b5:c6:00:f5:1e
E0:46:9A:56:74:6D
2C:B0:5D:5E:07:7B
B8:A3:86:20:5C:EC
54:E6:FC:A2:F1:E6
90:6F:52:6F:6E:C2
00:14:78:52:f5:7E
30:39:26:20:15:f8
E0:91:F5:F0:95:35
F4:F5:A5:F8:34:DA
E8:6D:52:01:23:29
DC:0B:1A:17:87:17
4C:80:93:44:AF:B1
B8:C6:8E:31:BB:CF
F8:1A:67:21:C9:7F
68:7F:74:77:AC:89
48:5b:39:5c:e1:39
E8:50:8B:25:27:6F
00:19:5B:99:96:37
10:3B:59:B6:CE:E8
f4:f5:e8:81:7a:58
f4:ec:38:ff:96:d8
00:26:5A:A4:D8:77
E0:75:7D:17:55:95
00:25:9c:28:f2:4c
10:3B:59:B4:63:18
9C:D2:1E:85:38:AB
00:26:91:63:19:B5
10:9F:A9:41:FD:C2
C4:46:19:A2:9C:C0
CC:3A:61:B6:D0:54
74:D4:35:91:82:95
00:18:0a:7f:d9:e0
9c:d6:43:c4:e3:40
48:59:29:be:77:ce
04:A1:51:8D:66:E3
08:96:D7:70:64:55
10:0D:7F:84:05:3D
9c:d3:6d:b7:67:40
18:87:96:17:21:C7
70:71:BC:2A:5D:04
B8:AE:6E:3C:B2:41
e8:3e:fc:72:f2:b0
9C:D3:6D:9C:89:08
0:22:fb:b3:36:50
00:1f:5b:c6:7c:89
00:18:39:E6:67:6F
00:1A:EF:0C:64:C9
30:19:66:0A:95:F3
CC:C3:EA:AA:B7:61
28:28:5D:7F:C9:90
C8:0A:A9:F8:7D:B9
20:4E:7F:7E:6B:47
2c:e4:12:8e:2d:d5
50:2E:5C:39:64:00
00:23:CD:F7:7F:54
24:FD:52:0C:41:59
58:6D:8F:4A:E6:B0
c4:a8:1d:7c:e3:64
6c:2f:2c:15:9e:ca
b4:75:0e:f1:52:ae
34:AF:2C:45:28:E5
34:4D:F7:5F:7E:6A
F8:1A:67:20:F0:FD
00:19:C7:F3:4A:90
08:BD:43:7C:AD:72
70:F1:A1:03:6B:9A
C4:A8:1D:24:1A:D0
08:96:D7:5B:CC:EF
98:52:B1:B3:90:59
DC:71:44:AE:41:E8
88:30:8A:F9:1B:B6
9C:E6:35:F0:AA:6A
00:24:01:f4:80:55
00:21:7c:d7:80:40
00:1D:72:A0:A0:A1
E0:24:7F:31:1E:AD
8C:89:A5:32:EB:50
CC:5D:4E:FB:3E:4D
00:26:44:26:41:85
10:0D:7F:AA:54:A0
78:92:9C:0C:A1:81
9C:B7:0D:6A:4F:CA
74:EA:3A:CA:C0:EC
9C:E6:35:0E:66:A9
00:04:ed:f3:28:4c
88:30:8A:5C:0B:73
FC:19:10:50:03:C9
00:18:01:c7:3c:41
68:17:29:A1:AE:C8
60:D9:C7:CB:4D:E5
CB:8E:19:6B:D1:F2
20:CF:30:E3:39:C0
10:1F:74:0B:50:C5
E8:99:C4:67:90:A8
20:F3:A3:CD:AD:03
00:24:B2:0E:15:CD
94:10:3E:03:16:0F
88:32:9B:C3:29:34
04:A1:51:BC:77:5B
BC:5F:F4:C9:0E:F5
00:04:ed:7e:29:75
b4:52:7e:45:4f:e7
5E:7F:38:59:DA:FB
C0:D9:62:7E:2D:71
E8:99:C4:84:FC:95
74:D0:2B:A7:F7:8E
14:DA:E9:6F:F8:93
FA:D1:11:61:B4:46
00:22:3F:97:0E:51
60:2a:d0:7f:87:c6
00:24:D1:8A:3B:73
00:23:69:4D:FC:9E
e4:f4:c6:23:b7:01
88:32:9B:98:1F:31
e4:f4:c6:23:b7:00
88:30:8A:64:99:5D
C4:85:08:8F:E8:CD
00:25:9C:6E:7A:C5
BC:5F:F4:73:6D:88
00:1C:C2:14:77:8C
80:BE:05:21:29:43
36:CC:20:11:F5:86
C4:04:15:A9:E2:06
00:05:59:38:94:34
54:A0:50:EF:BA:8C
cc:fb:65:33:33:d7
9C:04:EB:04:7D:7C
A8:A6:68:7B:D6:41
84:A8:E4:11:43:28
38:2C:4A:AC:A8:20
00:23:6c:7b:ac:45
54:04:A6:D3:36:E2
80:37:73:BE:76:06
44:80:eb:44:98:c3
44:80:EB:EE:DD:B3
cc:fb:65:f2:56:64
84:25:db:6d:d8:5d
98:E7:F5:DC:BB:14
E8:D4:E0:49:7B:AA
00:0c:e7:83:cf:02
E8:DE:27:55:FD:87
10:FE:ED:A1:C7:43
10:FE:ED:A1:C7:42
40:F3:08:32:E3:F0
E8:FC:AF:0A:2C:48
DC:0E:A1:26:CE:BF
CC:FA:00:E8:9A:D2
10:C3:7B:43:86:83
CC:FB:65:E3:3A:6B
CC:FB:65:E9:0E:05
68:1C:A2:00:BE:91
F4:09:D8:6C:AE:13
08:86:3b:a1:b3:18
64:77:91:19:4A:2D
94:51:03:D2:B5:1A
34:BE:00:95:29:CD
E8:50:8B:25:27:6F
00:1F:5B:BA:A8:0D
00:1f:f3:ce:aa:e5
F0:F4:07:B5:09:16
76:44:01:66:13:BB
74:44:01:66:13:BA
76:44:01:66:13:BC
5C:0A:5B:B2:52:99
8c:34:fd:93:9c:21
E4:F4:C6:00:C2:A0
1C:7E:E5:B8:C3:9A
E4:F8:EF:40:2F:18
08:3E:8E:D2:41:5F
00:24:8C:D2:4A:FA
94:0C:6D:F6:BE:5E
48:f8:b3:0e:c8:2e
b4:ce:f6:df:1a:10
00:26:75:B8:31:B5
B4:75:0E:27:A5:40
10:c3:7b:a7:45:ba
00:22:6B:F5:0F:FB
00:04:ed:e9:ad:14
C8:A7:0A:98:F7:B5
5C:35:3B:73:8E:33
A4:2B:8C:9A:F3:FC
A0:E4:CB:4E:57:30
E0:88:5D:58:7D:9C
08:96:D7:3C:FF:F7
AC:BC:32:AB:F5:53
34:8a:ae:60:a8:22
00:24:01:96:76:A2
38:AA:3C:5B:EA:94
AC:5D:10:3D:D8:E0
18:83:BF:D1:DB:1F
20:76:00:A6:06:41
B8:AE:6E:C8:F7:D3
10:7B:EF:81:18:0E
64:66:B3:3A:41:4C
58:6D:8F:EA:E3:6F
3C:7A:8A:2D:1A:7C
CC:FB:65:E3:3A:6B
90:48:9A:31:0E:F9
CC:35:40:77:A6:2C
20:AA:4B:A6:9B:89
40:b8:37:b5:84:f2
00:37:b7:b5:f6:11
CC:FB:65:E9:0E:05
50:7E:5D:79:8F:C2
10:08:B1:56:D1:3D
B8:E8:56:40:DE:76
AC:D1:B8:8B:29:C0
20:C9:D0:AB:1D:AA
00:26:C6:56:15:2C
58:2A:F7:F8:89:DD
c8:69:cd:b3:2b:80
40:d2:8a:2d:d8:f4
20:AA:4B:A6:9B:8A
20:AA:4B:A6:9B:88
2C:AB:A4:4F:53:19
e8:de:27:2e:e1:6c
1A:76:3F:10:8D:39
28:10:7B:42:E2:DD
74:DA:38:62:C0:09
00:21:91:76:F5:C6
70:62:B8:ED:B0:D1
d0:17:c2:d7:33:b1
EC:0E:C4:FF:E5:89
74:DA:38:89:54:2A
18:A6:F7:CB:6F:79
90:72:82:62:6B:20
48:59:29:F0:36:D4
84:38:38:84:C0:A2
6c:f3:7f:e7:b4:90
cc:35:40:f9:33:0e
e0:91:f5:be:9a:a7
A8:F9:4B:03:59:17
90:B6:86:E7:CC:69
00:24:7B:8C:5C:69
54:67:51:00:63:FB
34:bb:26:94:31:3d
68:A0:F6:61:2B:1A
60:E3:27:A4:5D:4E
24:95:04:0c:30:c0
28:C2:DD:43:F4:41
7C:BB:8A:52:5A:2C
98:B8:E3:82:FD:20
C8:D7:19:14:F1:D1
A4:B1:E9:B0:0B:3C
20:c9:d0:ce:26:b7
08:96:D7:89:25:7D
48:5d:36:5e:78:89
44:74:6c:e9:3e:f9
EC:9B:F3:96:2F:7E
f4:5c:89:90:ed:ab
02:1a:11:fb:a9:9d
AC:F1:DF:17:86:2A
0C:96:BF:65:FD:66
e4:ce:8f:65:37:10
C4:E9:84:56:AA:EA
84:10:0d:1c:55:6c
A4:08:EA:74:8D:D5
2C:56:DC:52:69:23
20:3D:B2:7C:F5:DD
34:AF:2C:EB:DB:A1
FC:C2:DE:00:70:3C
9C:D3:6D:95:94:87
14:cf:e2:04:03:e1
40:D2:8A:25:C9:52
60:E3:27:F1:7E:4C
A0:F3:C1:A4:6D:B8
50:6A:03:B0:A1:A9
1C:5F:2B:96:09:8d
D8:5D:4C:ED:9A:FB
C0:FF:D4:94:DF:6D
9C:B7:0D:1B:A0:E6
E8:94:F6:BE:96:C1
30:CB:F8:CB:7B:BF
74:DA:DA:B5:55:95
a4:71:74:5d:5e:04
AC:22:05:70:25:2A
)
while :
do
  for mac in ${HOST_MACS[@]};
  do
    ifconfig wlp4s0 down
    ifconfig wlp4s0 hw ether $mac
    ifconfig wlp4s0 up
    timeout 180s sudo hostapd ./streetpass.conf
    sleep 10
    echo Restarting interface. REGULAR MACS
  done
  for mac in ${PERSONAL_MACS[@]};
  do
    ifconfig wlp4s0 down
    ifconfig wlp4s0 hw ether $mac
    ifconfig wlp4s0 up
    timeout 30s sudo hostapd ./streetpass.conf
    sleep 2
    echo Restarting interface. PERSONAL MACS
  done
done
